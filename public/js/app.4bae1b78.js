(function(e){function t(t){for(var s,o,n=t[0],d=t[1],l=t[2],c=0,f=[];c<n.length;c++)o=n[c],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(e[s]=d[s]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var d=a[o];0!==i[d]&&(s=!1)}s&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},i={app:0},r=[];function o(e){return n.p+"js/"+({about:"about"}[e]||e)+"."+{about:"65e5c001"}[e]+".js"}function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(e){var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,s){a=i[e]=[t,s]}));t.push(a[2]=s);var r,d=document.createElement("script");d.charset="utf-8",d.timeout=120,n.nc&&d.setAttribute("nonce",n.nc),d.src=o(e);var l=new Error;r=function(t){d.onerror=d.onload=null,clearTimeout(c);var a=i[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,a[1](l)}i[e]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:d})}),12e4);d.onerror=d.onload=r,document.head.appendChild(d)}return Promise.all(t)},n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var c=0;c<d.length;c++)t(d[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0d2f":function(e,t,a){},"0d88":function(e,t,a){"use strict";var s=a("0d2f"),i=a.n(s);i.a},"398d":function(e,t,a){"use strict";var s=a("5549"),i=a.n(s);i.a},5549:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},r=[],o=(a("5c0b"),a("2877")),n=a("6544"),d=a.n(n),l=a("7496"),c={},u=Object(o["a"])(c,i,r,!1,null,null,null),f=u.exports;d()(u,{VApp:l["a"]});a("d1e78"),a("15f5");var p=a("f309");s["a"].use(p["a"]);var m=new p["a"]({mdicons:{iconfont:"md"},faicons:{iconfont:"fa"}}),h=(a("d3b7"),a("8c4f")),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"overflow-hidden"},[s("v-app-bar",{attrs:{absolute:"",color:"#fcb69f",dark:"",src:a("d7c3"),"scroll-target":"#scrolling-techniques-2"},scopedSlots:e._u([{key:"img",fn:function(t){var a=t.props;return[s("v-img",e._b({attrs:{gradient:"to top right, rgba(19,84,122,.5), rgba(128,208,199,.8)"}},"v-img",a,!1))]}}])},[s("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),s("div",[s("img",{staticClass:"bounceIn",attrs:{src:a("9b19"),width:"50"}})]),s("v-spacer"),s("v-toolbar-title",[e._v("VeritasSyS : "+e._s(e.userName))])],1),s("v-navigation-drawer",{attrs:{absolute:"",temporary:"",dark:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[s("v-list",{staticClass:"text-left",attrs:{nav:""}},[s("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[e.userType<=2?s("v-list-item",{on:{click:function(t){return e.selectMenu("useradmin")}}},[s("v-list-item-icon",[s("v-icon",[e._v("face")])],1),s("v-list-item-title",[e._v("Users")])],1):e._e(),s("v-list-item",{on:{click:function(t){return e.selectMenu("persons")}}},[s("v-list-item-icon",[s("v-icon",[e._v("person")])],1),s("v-list-item-title",[e._v("Estates")])],1),s("v-list-item",{on:{click:e.logout}},[s("v-list-item-icon",[s("v-icon",[e._v("exit_to_app")])],1),s("v-list-item-title",[e._v("Log Out")])],1)],1)],1)],1),s("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-2"}},[s("div",{staticStyle:{height:"100vh","margin-top":"100px","margin-right":"20px","margin-left":"20px"}},[s("h2",{staticClass:"text-left"},[s("span",[e._v(e._s(e.Headering(e.page)))])]),s(e.page,{tag:"component"})],1)]),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1)],1)},g=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"d-flex flex-row mb-6"},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300"}},[a("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[a("v-card-title",[e._v("Total Estates : 52")])],1)],1),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300"}},[a("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[a("v-card-title",[e._v("Total Financials: $678,090.89 ")])],1)],1),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300"}},[a("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[a("v-card-title",[e._v("Total Registration : 234")])],1)],1),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300"}},[a("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[a("v-card-title",[e._v("Total Beneficiaries : 500")])],1)],1)],1),a("v-card",{staticClass:"d-flex flex-row mb-6",attrs:{outlined:"",tile:""}},[a("charta"),a("chartc"),a("chartb")],1)],1)},y=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts"},[a("IEcharts",{attrs:{option:e.bar},on:{ready:e.onReady,click:e.onClick}})],1)},w=[],U=a("ce44"),_={name:"view",components:{IEcharts:U["a"]},props:{},data:function(){return{loading:!0,bar:{color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Registrations",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220]}]}}},methods:{doRandom:function(){for(var e=this,t=[],a=0,s=5,i=99;a<6;a++)t.push(Math.floor(Math.random()*(i+1-s)+s));e.loading=!e.loading,e.bar.series[0].data=t},onReady:function(e,t){console.log(e,t)},onClick:function(e,t,a){console.log(e,t,a)}}},k=_,T=(a("398d"),Object(o["a"])(k,b,w,!1,null,"6bc1c204",null)),N=T.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts"},[a("IEcharts",{attrs:{option:e.bar},on:{ready:e.onReady,click:e.onClick}})],1)},I=[],C={name:"view",components:{IEcharts:U["a"]},props:{},data:function(){return{loading:!0,bar:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{bottom:10,left:"center",data:["Teller 1","Teller 2","Teller 3","Teller 4","Teller 5"]},series:[{name:"Financials",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:335,name:"Teller 1"},{value:310,name:"Teller 2"},{value:234,name:"Teller 3"},{value:135,name:"Teller 4"},{value:1548,name:"Teller 5"}]}]}}},methods:{doRandom:function(){for(var e=this,t=[],a=0,s=5,i=99;a<6;a++)t.push(Math.floor(Math.random()*(i+1-s)+s));e.loading=!e.loading,e.bar.series[0].data=t},onReady:function(e,t){console.log(e,t)},onClick:function(e,t,a){console.log(e,t,a)}}},P=C,E=(a("d1d4"),Object(o["a"])(P,A,I,!1,null,"90b5d5ea",null)),$=E.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts"},[a("IEcharts",{attrs:{option:e.bar},on:{ready:e.onReady,click:e.onClick}})],1)},S=[],V={name:"view",components:{IEcharts:U["a"]},props:{},data:function(){return{loading:!0,bar:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:-20,left:"center",data:["Registrations","Uploads","Transactions"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["Teller 1","Teller 2","Teller 3","Teller 4","teller 5","Teller 6","Teller 7"]},series:[{name:"Registrations",type:"bar",stack:"总量",label:{show:!0,position:"insideRight"},data:[320,302,301,334,390,330,320]},{name:"Uploads",type:"bar",stack:"总量",label:{show:!0,position:"insideRight"},data:[120,132,101,134,90,230,210]},{name:"Transactions",type:"bar",stack:"总量",label:{show:!0,position:"insideRight"},data:[220,182,191,234,290,330,310]}]}}},methods:{doRandom:function(){for(var e=this,t=[],a=0,s=5,i=99;a<6;a++)t.push(Math.floor(Math.random()*(i+1-s)+s));e.loading=!e.loading,e.bar.series[0].data=t},onReady:function(e,t){console.log(e,t)},onClick:function(e,t,a){console.log(e,t,a)}}},D=V,R=(a("6aee"),Object(o["a"])(D,F,S,!1,null,"16a5f6d8",null)),B=R.exports,O={components:{charta:N,chartb:$,chartc:B},data:function(){return{nodeApi:""}},computed:{},watch:{},created:function(){},methods:{}},j=O,L=a("b0afa"),z=a("99d9"),M=a("adda"),Y=Object(o["a"])(j,x,y,!1,null,"a75bb23e",null),G=Y.exports;d()(Y,{VCard:L["a"],VCardTitle:z["c"],VImg:M["a"]});var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"userId"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-text-field",{staticClass:"mt-5 mr-5",attrs:{dense:"","append-icon":"search",label:"Search",solo:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),s),[e._v("New User")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.editedUser.firstName,callback:function(t){e.$set(e.editedUser,"firstName",t)},expression:"editedUser.firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.editedUser.lastName,callback:function(t){e.$set(e.editedUser,"lastName",t)},expression:"editedUser.lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Email Address"},model:{value:e.editedUser.emailAddress,callback:function(t){e.$set(e.editedUser,"emailAddress",t)},expression:"editedUser.emailAddress"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-select",{staticClass:"text-left",attrs:{"item-text":"name","item-value":"id",items:e.userTypeData,label:"Select UserType"},model:{value:e.editedUser.usertype,callback:function(t){e.$set(e.editedUser,"usertype",t)},expression:"editedUser.usertype"}})],1),"New User"==e.formTitle?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.editedUser.userPassword,callback:function(t){e.$set(e.editedUser,"userPassword",t)},expression:"editedUser.userPassword"}})],1):e._e(),"New User"==e.formTitle?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Confirm Password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var s=t.item;return[1==e.userTypeAdmin?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editItem(s)}}},"v-icon",r,!1),i),[e._v(" edit ")])]}}],null,!0)},[a("span",[e._v("Edit User")])]):e._e(),1!=s.status?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.changeStatus(s,1)}}},"v-icon",r,!1),i),[e._v(" face ")])]}}],null,!0)},[a("span",[e._v("Activate User")])]):e._e(),0!=s.status?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"green"},on:{click:function(t){return e.changeStatus(s,0)}}},"v-icon",r,!1),i),[e._v(" face ")])]}}],null,!0)},[a("span",[e._v("De-Activate User")])]):e._e(),1==e.userTypeAdmin?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"gray"},on:{click:function(t){return e.openRestPassword(s)}}},"v-icon",r,!1),i),[e._v(" vpn_key ")])]}}],null,!0)},[a("span",[e._v("Reset Password")])]):e._e()]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0},{key:"item.status",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.userStatus(a))+" ")]}},{key:"item.usertype",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.userType(a))+" ")]}}])}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogRestPassword,callback:function(t){e.dialogRestPassword=t},expression:"dialogRestPassword"}},[a("v-card",[a("v-card-title",{staticClass:"headline red lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v("Reset Password")])]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.editedUser.userPassword,callback:function(t){e.$set(e.editedUser,"userPassword",t)},expression:"editedUser.userPassword"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Confirm Password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogRestPassword=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.restPassword}},[e._v("Save")])],1)],1)],1)],1)},q=[],J=(a("c975"),a("a434"),{data:function(){return{nodeApi:"",page:"Main Page",dialog:!1,dialogRestPassword:!1,search:"",confirm_password:"",userTypeData:[{id:1,name:"Super Admin"},{id:2,name:"Admin"},{id:3,name:"Accountant"},{id:4,name:"Data Capturer"}],userStatusData:[{id:1,name:"Active"},{id:2,name:"Inactive"}],headers:[{text:"User ID",value:"userId"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Email Address",value:"emailAddress"},{text:"User Status",value:"status"},{text:"User Type",value:"usertype"},{text:"Actions",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedUser:{firstName:"",lastName:"",emailAddress:"",userPassword:"",usertype:""},defaultUser:{firstName:"",lastName:"",emailAddress:"",userPassword:"",usertype:""},passwordObj:{},userTypeAdmin:null}},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"}},watch:{dialog:function(e){e||this.close()}},mounted:function(){this.userTypeAdmin=this.$session.get("user").usertype},created:function(){this.initialize()},methods:{initialize:function(){var e=this;this.axios.get(this.nodeApi+"/getAllUsers").then((function(t){e.users=t.data})).catch((function(e){console.log(e)}))},userStatus:function(e){return 0==e.status?"Inactive":"Active"},userType:function(e){return 1==e.usertype?"Super Admin":2==e.usertype?"Admin":3==e.usertype?"Accountant":4==e.usertype?"Data Capturer":void 0},openRestPassword:function(e){this.dialogRestPassword=!0,this.passwordObj={userId:e.userId,userPassword:""}},restPassword:function(){var e=this;this.passwordObj.userPassword=this.confirm_password,this.editedUser.userPassword?this.editedUser.userPassword!=this.confirm_password?this.$swal.fire({type:"error",title:"Update User Failed",text:"Passwords do not match"}):this.axios.post(this.nodeApi+"/updatePassword",this.passwordObj).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Updated",text:"Your user password was updated successfully."}),e.initialize(),e.dialogRestPassword=!1,e.confirm_password="",e.editedUser.userPassword=""):e.$swal.fire({type:"error",title:"Updating User Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating User Failed",text:t})})):this.$swal.fire({type:"error",title:"Update User Failed",text:"Please enter a valid Password"})},changeStatus:function(e,t){var a=this,s={userId:e.userId,status:t},i="";i=1==t?"Activated":"De-Activated",this.axios.post(this.nodeApi+"/updateStatus",s).then((function(e){e.data.affectedRows>0?(a.$swal.fire({type:"success",title:"User Updated",text:"Your user was successfully "+i+"."}),a.initialize()):a.$swal.fire({type:"error",title:"Updating User Failed",text:e.data.originalError.info.message})})).catch((function(e){a.$swal.fire({type:"error",title:"Updating User Failed",text:e})}))},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedUser=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this.users.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.users.splice(t,1)},close:function(){var e=this;this.dialog=!1,this.confirm_password="",this.$nextTick((function(){e.editedUser=Object.assign({},e.defaultUser),e.editedIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1){var t={firstName:this.editedUser.firstName,lastName:this.editedUser.lastName,emailAddress:this.editedUser.emailAddress,userId:this.editedUser.userId,usertype:this.editedUser.usertype};this.axios.post(this.nodeApi+"/updateUser",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Updated",text:"Your user was successfully updated."}),e.initialize()):e.$swal.fire({type:"error",title:"Updating User Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating User Failed",text:t})})),this.close()}else this.editedUser.firstName?this.editedUser.lastName?this.editedUser.emailAddress?this.editedUser.usertype?this.editedUser.userPassword?this.editedUser.userPassword!=this.confirm_password?this.$swal.fire({type:"error",title:"Adding User Failed",text:"Passwords do not match"}):(this.editedUser.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addUser",this.editedUser).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Added",text:"Your new user was successfully added."}),e.initialize()):e.$swal.fire({type:"error",title:"Adding User Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding User Failed",text:t})})),this.close()):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Password"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please select a valid User Type"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Email Address"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Last Name"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid First Name"})}}}),H=J,W=a("8336"),K=a("62ad"),Q=a("a523"),X=a("8fea"),ee=a("169a"),te=a("132d"),ae=a("0fd9"),se=a("b974"),ie=a("2fa4"),re=a("8654"),oe=a("71d9"),ne=a("3a2f"),de=Object(o["a"])(H,Z,q,!1,null,"8dcf08b8",null),le=de.exports;d()(de,{VBtn:W["a"],VCard:L["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:K["a"],VContainer:Q["a"],VDataTable:X["a"],VDialog:ee["a"],VIcon:te["a"],VRow:ae["a"],VSelect:se["a"],VSpacer:ie["a"],VTextField:re["a"],VToolbar:oe["a"],VTooltip:ne["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-right",staticStyle:{"margin-top":"10px"}},[a("label",{staticClass:"btn btn-default"},e._l(e.estateAttachments,(function(t,s){return a("v-chip",{key:s,staticClass:"ma-2",attrs:{large:"",color:e.colors[t.docType-1],outlined:"",label:""},on:{click:function(a){return e.openAttachment(t)}}},[a("v-icon",{attrs:{left:""}},[e._v(" attachment ")]),e._v(" "+e._s(t.docTypeName)+" ")],1)})),1),a("br"),a("br"),a("v-data-table",{staticClass:"elevation-2",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),8!=e.estateStatusCheck?a("v-btn",{staticClass:"mb-2 mr-5",attrs:{color:"error",dark:""},on:{click:function(t){e.dialogUpload=!0}}},[e._v("Add Attachment")]):e._e(),e.estateStatusCheck>=7?a("v-btn",{staticClass:"mb-2 mr-5",attrs:{color:"green",dark:""},on:{click:e.Upload2}},[a("v-icon",{attrs:{left:""}},[e._v(" attachment ")]),e._v(" Add Tier 2 ")],1):e._e(),a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""}},[e._v("New Beneficiary")])],1)]},proxy:!0},{key:"item.estateStatus",fn:function(t){var s=t.item;return[5==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e(),6==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"cyan",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e(),7==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"blue",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e(),8==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"green",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e()]}},{key:"item.estateValue",fn:function(t){var a=t.item;return[e._v(" $"+e._s(parseFloat(a.estateValue).toFixed(2))+" ")]}},{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.createdAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.updatedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.updatedAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[e.userType<=2?a("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editEstate(s)}}},[e._v(" edit ")]):e._e(),1==e.userType?a("v-icon",{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.deleteEstate(s)}}},[e._v(" delete ")]):e._e()]}},{key:"no-data",fn:function(){return[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.newEstate}},[e._v("New Estate")])]},proxy:!0}])}),a("br"),a("br"),a("v-data-table",{staticClass:"elevation-2",attrs:{headers:e.headersBene,items:e.beneficiaries,search:e.searchBene,"sort-by":"beneficiaryId"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-text-field",{staticClass:"mt-5 mr-5",attrs:{dense:"","append-icon":"search",label:"Search Beneficiaries",solo:""},model:{value:e.searchBene,callback:function(t){e.searchBene=t},expression:"searchBene"}})],1)]},proxy:!0},{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.createdAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.updatedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.updatedAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[e.userType<=2?a("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v(" edit ")]):e._e(),1==e.userType?a("v-icon",{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" delete ")]):e._e()]}},{key:"no-data",fn:function(){return[a("h2",[e._v("No beneficiaries found for this estate")])]},proxy:!0}])}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogEstate,callback:function(t){e.dialogEstate=t},expression:"dialogEstate"}},[a("v-card",[a("v-card-title",{staticClass:"headline green lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleEstate)+" For "+e._s(e.firstName)+" "+e._s(e.lastName))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Estate Name",placeholder:e.firstName+" "+e.lastName+" Trust"},model:{value:e.estate.estateName,callback:function(t){e.$set(e.estate,"estateName",t)},expression:"estate.estateName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Estate Value",type:"number",placeholder:"0.00",prefix:"$"},model:{value:e.estate.estateValue,callback:function(t){e.$set(e.estate,"estateValue",t)},expression:"estate.estateValue"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEstate}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveEstate}},[e._v("Save")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogUpload,callback:function(t){e.dialogUpload=t},expression:"dialogUpload"}},[a("v-card",[a("v-card-title",{staticClass:"headline green lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleEstateTier)+" ")])]),a("v-card-text",[a("div",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("input",{ref:"file",attrs:{type:"file"},on:{change:e.selectFile}})]),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-combobox",{attrs:{items:e.docType,"item-text":"docName","item-value":"id",label:"Select Document Type"},model:{value:e.docTypeName,callback:function(t){e.docTypeName=t},expression:"docTypeName"}})],1)],1)],1)]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogUpload=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.upload}},[e._v("Save")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogUpload2,callback:function(t){e.dialogUpload2=t},expression:"dialogUpload2"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleEstateTier)+" ")])]),a("v-card-text",[a("div",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("input",{ref:"file",attrs:{type:"file"},on:{change:e.selectFile}})]),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-combobox",{attrs:{items:e.docType,"item-text":"docName","item-value":"id",label:"Select Document Type"},model:{value:e.docTypeName,callback:function(t){e.docTypeName=t},expression:"docTypeName"}})],1)],1)],1)]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogUpload2=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.upload2}},[e._v("Save")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle)+" For "+e._s(e.estateName))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.editedUser.firstName,callback:function(t){e.$set(e.editedUser,"firstName",t)},expression:"editedUser.firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.editedUser.lastName,callback:function(t){e.$set(e.editedUser,"lastName",t)},expression:"editedUser.lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"National ID"},model:{value:e.editedUser.nationalId,callback:function(t){e.$set(e.editedUser,"nationalId",t)},expression:"editedUser.nationalId"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Percentage Stake",placeholder:"100",type:"number",suffix:"%"},model:{value:e.editedUser.stake,callback:function(t){e.$set(e.editedUser,"stake",t)},expression:"editedUser.stake"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)},ue=[],fe=(a("4160"),a("a9e3"),a("159b"),a("96cf"),a("1da1")),pe={props:{personId:Number},data:function(){return{nodeApi:"",selectedFiles:void 0,currentFile:void 0,progress:0,colors:["green","blue","purple"],message:"",docTypeName:"",estateId:null,dialogUpload:!1,dialogUpload2:!1,fileInfos:[],formTitleEstateTier:"",page:"Main Page",dialog:!1,dialogEstate:!1,search:"",searchBene:"",firstName:"",lastName:"",estateName:"",estateStatusCheck:5,confirm_password:"",userTypeData:[{id:1,name:"Registrar"},{id:2,name:"Court Officer"},{id:3,name:"Judge"},{id:4,name:"Lawyer"},{id:5,name:"Prisons Officer"}],userStatusData:[{id:1,name:"Active"},{id:2,name:"Inactive"}],headers:[{text:"Estate ID",value:"estateId"},{text:"Estate Name",value:"estateName"},{text:"Full Estate Value",value:"estateValue"},{text:"Estate Owner",value:"estateOwner"},{text:"Estate Status",value:"estateStatus"},{text:"Date Registered",value:"createdAt"},{text:"Date Modified",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],headersBene:[{text:"Beneficiary ID",value:"beneficiaryId"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Nation ID",value:"nationalId"},{text:"Estate Stake",value:"stake"},{text:"Date Registered",value:"createdAt"},{text:"Date Modified",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],users:[],person:[],editedIndex:-1,editedUser:{estateId:"",firstName:"",lastName:"",nationalId:"",stake:""},defaultUser:{estateId:"",firstName:"",lastName:"",nationalId:"",stake:""},estateIndex:-1,estate:{estateName:"",estateValue:"",deathRecordId:""},defaultEstate:{estateName:"",estateValue:"",deathRecordId:""},disabled:!0,beneficiaries:[],docType:[],disabledBene:!1,userType:null,docTier:null,estateAttachments:[],saveTier1Docs:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New Beneficiary":"Edit Beneficiary"},formTitleEstate:function(){return-1===this.estateIndex?"New Estate":"Edit Estate"}},watch:{dialog:function(e){e||this.close()},docTypeName:function(e){console.log(e)},dialogUpload:function(e){e&&(this.selectedFiles=void 0,this.currentFile=void 0,this.docTypeName="",this.docTier)},dialogUpload2:function(e){e&&(this.selectedFiles=void 0,this.currentFile=void 0,this.docTypeName="")}},mounted:function(){this.userType=this.$session.get("user").usertype,this.getPerson(this.personId),this.initialize(this.personId)},created:function(){},methods:{Upload2:function(){this.estateDocNames(2),this.saveCheck3(),this.formTitleEstateTier="Tier 2 Document Upload Form",this.dialogUpload2=!0},openAttachment:function(e){this.url="http://192.168.100.15:3000/getDoc/".concat(e.docName),window.open(this.url)},getEstateId:function(e){var t=this;this.axios.post(this.nodeApi+"/updateEstateStatus",{estateId:this.users[0].estateId,estateStatus:e}).then((function(e){console.log(e.data),t.getPerson(t.personId),t.initialize(t.personId)})).catch((function(e){console.log(e)}))},selectFile:function(){this.selectedFiles=this.$refs.file.files,console.log(this.selectedFiles)},upload:function(){var e=this;if(this.selectedFiles)if(""==this.docTypeName)this.$swal.fire({type:"error",title:"File Upload Failed",text:"Please select the category of the document you selected"});else{this.currentFile=this.selectedFiles.item(0),this.progress=0;var t=new FormData;t.append("file",this.currentFile);var a={"Content-Type":"multipart/form-data"};this.axios.post(this.nodeApi+"/upload",t,{headers:a}).then((function(t){t.data.message?e.saveDocument(t.data.filename,e.docTier):e.$swal.fire({type:"error",title:"File Upload Failed",text:t.data.error})})).catch((function(e){console.log(e)}))}else this.$swal.fire({type:"error",title:"File Upload Failed",text:"Please select the document you wish to attach from you computer."})},upload2:function(){var e=this;if(this.selectedFiles)if(""==this.docTypeName)this.$swal.fire({type:"error",title:"File Upload Failed",text:"Please select the category of the document you selected"});else{this.currentFile=this.selectedFiles.item(0),this.progress=0;var t=new FormData;t.append("file",this.currentFile);var a={"Content-Type":"multipart/form-data"};this.axios.post(this.nodeApi+"/upload",t,{headers:a}).then((function(t){t.data.message?e.saveDocument2(t.data.filename,2):e.$swal.fire({type:"error",title:"File Upload Failed",text:t.data.error})})).catch((function(e){console.log(e)}))}else this.$swal.fire({type:"error",title:"File Upload Failed",text:"Please select the document you wish to attach from you computer."})},saveDocument:function(e,t){var a=this;console.log(this.docTypeName);var s={estateId:this.users[0].estateId,docName:e,docType:t,docTypeName:this.docTypeName.docName,createdBy:this.$session.get("user").userId};this.axios.post(this.nodeApi+"/addEstateDoc",s).then((function(e){e.data.affectedRows>0?(a.selectedFiles=void 0,a.dialogUpload=!1,a.dialogUpload2=!1,a.$swal.fire({type:"success",title:"Document Added",text:"Your new estate document was successfully added."}),1==a.docTier&&a.checkAllDocs(a.users[0].estateId),2==a.docTier&&a.getEstateId(7),3==a.docTier&&a.checkAllDocs3(a.users[0].estateId)):a.$swal.fire({type:"error",title:"Adding Document Failed",text:e.data.originalError.info.message})})).catch((function(e){a.$swal.fire({type:"error",title:"Adding Document Failed",text:e})}))},saveDocument2:function(e,t){var a=this;console.log(this.docTypeName);var s={estateId:this.users[0].estateId,docName:e,docType:t,docTypeName:this.docTypeName.docName,createdBy:this.$session.get("user").userId};this.axios.post(this.nodeApi+"/addEstateDoc",s).then((function(e){e.data.affectedRows>0?(a.selectedFiles=void 0,a.dialogUpload=!1,a.dialogUpload2=!1,a.$swal.fire({type:"success",title:"Document Added",text:"Your new estate document was successfully added."}),a.getEstateId(7)):a.$swal.fire({type:"error",title:"Adding Document Failed",text:e.data.originalError.info.message})})).catch((function(e){a.$swal.fire({type:"error",title:"Adding Document Failed",text:e})}))},saveCheck2:function(){var e=this;1==this.docTier&&this.axios.post(this.nodeApi+"/getEstateDocCheck",{estateId:this.users[0].estateId}).then((function(t){e.saveTier1Docs=t.data;var a=e.docType;e.saveTier1Docs.forEach((function(e){a.forEach((function(t,s){e.docTypeName==t.docName&&a.splice(s,1)}))})),e.docType=a,console.log(e.docType)})).catch((function(e){console.log(e)})),2==this.docTier&&this.axios.post(this.nodeApi+"/getEstateDocCheck2",{estateId:this.users[0].estateId}).then((function(t){e.saveTier1Docs=t.data;var a=e.docType;e.saveTier1Docs.forEach((function(e){a.forEach((function(t,s){e.docTypeName==t.docName&&a.splice(s,1)}))})),e.docType=a})).catch((function(e){console.log(e)})),3==this.docTier&&this.axios.post(this.nodeApi+"/getEstateDocCheck3",{estateId:this.users[0].estateId}).then((function(t){e.saveTier1Docs=t.data;var a=e.docType;e.saveTier1Docs.forEach((function(e){a.forEach((function(t,s){e.docTypeName==t.docName&&a.splice(s,1)}))})),e.docType=a})).catch((function(e){console.log(e)}))},saveCheck3:function(){var e=this;this.axios.post(this.nodeApi+"/getEstateDocCheck2",{estateId:this.users[0].estateId}).then((function(t){e.saveTier1Docs=t.data;var a=e.docType;e.saveTier1Docs.forEach((function(e){a.forEach((function(t,s){e.docTypeName==t.docName&&a.splice(s,1)}))})),e.docType=a})).catch((function(e){console.log(e)}))},checkAllDocs:function(e){var t=this;this.axios.post(this.nodeApi+"/getEstateDocCheck",{estateId:e}).then((function(e){t.saveTier1Docs=e.data,t.saveTier1Docs.length>=6?t.getEstateId(6):(t.getPerson(t.personId),t.initialize(t.personId))})).catch((function(e){console.log(e)}))},checkAllDocs2:function(e){var t=this;this.axios.post(this.nodeApi+"/getEstateDocCheck2",{estateId:e}).then((function(e){t.saveTier1Docs=e.data,t.saveTier1Docs.length>=3?t.getEstateId(7):(t.getPerson(t.personId),t.initialize(t.personId))})).catch((function(e){console.log(e)}))},checkAllDocs3:function(e){var t=this;this.axios.post(this.nodeApi+"/getEstateDocCheck3",{estateId:e}).then((function(e){t.saveTier1Docs=e.data,t.saveTier1Docs.length>=3?t.getEstateId(8):(t.getPerson(t.personId),t.initialize(t.personId))})).catch((function(e){console.log(e)}))},newEstate:function(){this.dialogEstate=!0},initialize:function(e){var t=this;return Object(fe["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.axios.post(t.nodeApi+"/getEstate",{personId:e}).then((function(e){t.users=e.data,t.users.length<1?t.disabled=!0:(t.disabled=!1,t.estateName=t.users[0].estateName,t.estateStatusCheck=t.users[0].estateStatus,t.estateDocNamesAttachment(t.users[0].estateId),t.initializeBene(t.users[0].estateId))})).catch((function(e){console.log(e)}));case 1:case"end":return a.stop()}}),a)})))()},initialize2:function(e){var t=this;return Object(fe["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(t.nodeApi+"/getEstate",{personId:e}).then((function(e){t.users=e.data,t.users.length<1?t.disabled=!0:(t.disabled=!1,t.estateName=t.users[0].estateName,t.estateStatusCheck=t.users[0].estateStatus)})).catch((function(e){console.log(e)}));case 2:return a.next=4,t.saveCheck2();case 4:case"end":return a.stop()}}),a)})))()},initializeBene:function(e){var t=this;this.axios.post(this.nodeApi+"/getBeneficiary",{estateId:e}).then((function(e){t.beneficiaries=e.data})).catch((function(e){console.log(e)}))},estateDocNames:function(e){var t=this;this.axios.post(this.nodeApi+"/getEstateDocNames",{docTier:e}).then((function(e){t.docType=e.data})).catch((function(e){console.log(e)}))},estateDocNamesAttachment:function(e){var t=this;this.axios.post(this.nodeApi+"/getEstateDocNamesAttachment",{estateId:e}).then((function(e){t.estateAttachments=e.data})).catch((function(e){console.log(e)}))},getPerson:function(e){var t=this;this.axios.post(this.nodeApi+"/getPerson",{personId:e}).then((function(e){t.person=e.data,t.person.length>0&&(t.firstName=t.person[0].firstName,t.lastName=t.person[0].lastName)})).catch((function(e){console.log(e)}))},estateStatus:function(e){return 5==e?(this.docTier=1,this.estateDocNames(this.docTier),this.formTitleEstateTier="Tier 1 Document Upload Form","New Estate Pending Upload"):6==e?(this.docTier=2,this.estateDocNames(this.docTier),this.formTitleEstateTier="Tier 2 Document Upload Form","Estate @ 33%"):7==e?(this.estateDocNames(this.docTier),this.formTitleEstateTier="Tier 3 Document Upload Form",this.docTier=3,"Estate @ 66%"):8==e?"Estate completed @ 100%":void 0},editItem:function(e){this.editedIndex=this.beneficiaries.indexOf(e),this.editedUser=Object.assign({},e),this.dialog=!0},editEstate:function(e){this.estateIndex=this.users.indexOf(e),this.estate=Object.assign({},e),this.dialogEstate=!0},deleteItem:function(e){var t=this.beneficiaries.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.beneficiaries.splice(t,1)},deleteEstate:function(e){var t=this.users.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.users.splice(t,1)},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedUser=Object.assign({},e.defaultUser),e.editedIndex=-1}))},closeEstate:function(){var e=this;this.dialogEstate=!1,this.$nextTick((function(){e.estate=Object.assign({},e.defaultEstate),e.estateIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1){var t={firstName:this.editedUser.firstName,lastName:this.editedUser.lastName,nationalId:this.editedUser.nationalId,beneficiaryId:this.editedUser.beneficiaryId,stake:this.editedUser.stake};this.axios.post(this.nodeApi+"/updateBeneficiary",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Beneficiary Updated",text:"Your beneficiary was successfully updated."}),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Updating Beneficiary Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating Beneficiary Failed",text:t})})),this.close()}else this.editedUser.firstName?this.editedUser.lastName?this.editedUser.nationalId?this.editedUser.stake?this.editedUser.stake>100?this.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:"Please enter a stake value less than 100%"}):this.editedUser.stake<1?this.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:"Please enter a stake value greater than 0%"}):(this.editedUser.estateId=this.users[0].estateId,this.editedUser.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addBeneficiary",this.editedUser).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Beneficiary Added",text:"Your new beneficiary was successfully added."}),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:t})})),this.close()):this.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:"Please enter a valid Stake percentage"}):this.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:"Please enter a valid National ID"}):this.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:"Please enter a valid Last Name"}):this.$swal.fire({type:"error",title:"Adding Beneficiary Failed",text:"Please enter a valid First Name"})},saveEstate:function(){var e=this;if(this.estateIndex>-1){var t={estateName:this.estate.estateName,estateValue:this.estate.estateValue,estateId:this.estate.estateId};this.axios.post(this.nodeApi+"/updateEstate",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Estate Updated",text:"Your estate was successfully updated."}),e.getPerson(e.personId),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Updating Estate Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating Estate Failed",text:t})})),this.closeEstate()}else this.estate.estateName?this.estate.estateValue?(this.estate.deathRecordId=this.personId,this.estate.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addEstate",this.estate).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Estate Added",text:"Your new estate was successfully added."}),e.getPerson(e.personId),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Adding estate Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding estate Failed",text:t})})),this.closeEstate()):this.$swal.fire({type:"error",title:"Adding Estate Failed",text:"Please enter a valid Estate Value"}):this.$swal.fire({type:"error",title:"Adding Estate Failed",text:"Please enter a valid Estate Name"})}}},me=pe,he=a("cc20"),ve=a("2b5d"),ge=Object(o["a"])(me,ce,ue,!1,null,"09d93790",null),xe=ge.exports;d()(ge,{VBtn:W["a"],VCard:L["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VChip:he["a"],VCol:K["a"],VCombobox:ve["a"],VContainer:Q["a"],VDataTable:X["a"],VDialog:ee["a"],VIcon:te["a"],VRow:ae["a"],VSpacer:ie["a"],VTextField:re["a"],VToolbar:oe["a"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{disabled:e.disabled,color:"primary",dark:""}},"v-btn",i,!1),s),[e._v("New Transaction")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle)+" For "+e._s(e.estateName))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Transaction Details"},model:{value:e.editedUser.details,callback:function(t){e.$set(e.editedUser,"details",t)},expression:"editedUser.details"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Transaction Amount",placeholder:"100",type:"number",prefix:"$"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-select",{staticClass:"text-left",attrs:{"item-text":"name","item-value":"id",items:e.tranTypeData,label:"Select Transaction Type"},model:{value:e.editedUser.type,callback:function(t){e.$set(e.editedUser,"type",t)},expression:"editedUser.type"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.estateStatus",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.estateStatus(a.estateStatus))+" ")]}},{key:"item.estateValue",fn:function(t){var a=t.item;return[e._v(" $"+e._s(parseFloat(a.estateValue).toFixed(2))+" ")]}},{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.createdAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.updatedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.updatedAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"no-data",fn:function(){return[a("h2",[e._v("No Estate Record Found")])]},proxy:!0}])}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersBene,items:e.transactions,search:e.searchBene,"sort-by":"financialId"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-text-field",{staticClass:"mt-5 mr-5",attrs:{dense:"","append-icon":"search",label:"Search Transaction",solo:""},model:{value:e.searchBene,callback:function(t){e.searchBene=t},expression:"searchBene"}})],1)]},proxy:!0},{key:"item.debtiamount",fn:function(t){var a=t.item;return[e._v(" "+e._s(parseFloat(a.debtiamount).toFixed(2))+" ")]}},{key:"item.creditamount",fn:function(t){var a=t.item;return[e._v(" "+e._s(parseFloat(a.creditamount).toFixed(2))+" ")]}},{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.createdAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.updatedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.updatedAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[e.userType<=2?a("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v(" edit ")]):e._e(),1==e.userType?a("v-icon",{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" delete ")]):e._e()]}},{key:"no-data",fn:function(){return[a("h2",[e._v("No transactions found for this estate")])]},proxy:!0}])}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogEstate,callback:function(t){e.dialogEstate=t},expression:"dialogEstate"}},[a("v-card",[a("v-card-title",{staticClass:"headline green lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleEstate)+" For "+e._s(e.firstName)+" "+e._s(e.lastName))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Estate Name",placeholder:e.firstName+" "+e.lastName+" Trust"},model:{value:e.estate.estateName,callback:function(t){e.$set(e.estate,"estateName",t)},expression:"estate.estateName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Estate Value",type:"number",placeholder:"0.00",prefix:"$"},model:{value:e.estate.estateValue,callback:function(t){e.$set(e.estate,"estateValue",t)},expression:"estate.estateValue"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEstate}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveEstate}},[e._v("Save")])],1)],1)],1)],1)},be=[],we=(a("b680"),{props:{personId:Number},data:function(){return{nodeApi:"",page:"Main Page",dialog:!1,dialogEstate:!1,search:"",searchBene:"",firstName:"",lastName:"",estateName:"",confirm_password:"",tranTypeData:[{id:1,name:"Debit Estate"},{id:2,name:"Credit Estate"}],userStatusData:[{id:1,name:"Active"},{id:2,name:"Inactive"}],headers:[{text:"Estate ID",value:"estateId"},{text:"Estate Name",value:"estateName"},{text:"Full Estate Value",value:"estateValue"},{text:"Estate Owner",value:"estateOwner"},{text:"Estate Status",value:"estateStatus"},{text:"Date Registered",value:"createdAt"},{text:"Date Modified",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],headersBene:[{text:"Transaction ID",value:"financialId"},{text:"Date Registered",value:"createdAt"},{text:"Date Modified",value:"updatedAt"},{text:"Transaction Details",value:"details"},{text:"Debit",value:"debitamount"},{text:"Credit",value:"creditamount"},{text:"Actions",value:"actions",sortable:!1}],users:[],person:[],amount:"",editedIndex:-1,editedUser:{estateId:"",details:"",debitamount:"",creditamount:"",type:""},defaultUser:{estateId:"",details:"",debitamount:"",creditamount:"",type:""},estateIndex:-1,estate:{estateName:"",estateValue:"",deathRecordId:""},defaultEstate:{estateName:"",estateValue:"",deathRecordId:""},disabled:!0,transactions:[],disabledBene:!1,userType:null}},computed:{formTitle:function(){return-1===this.editedIndex?"New Transaction":"Edit Transaction"},formTitleEstate:function(){return-1===this.estateIndex?"New Estate":"Edit Estate"}},watch:{dialog:function(e){e||this.close()}},mounted:function(){this.userType=this.$session.get("user").usertype,this.getPerson(this.personId),this.initialize(this.personId)},created:function(){},methods:{newEstate:function(){this.dialogEstate=!0},initialize:function(e){var t=this;this.axios.post(this.nodeApi+"/getEstate",{personId:e}).then((function(e){t.users=e.data,t.users.length<1?t.disabled=!0:(t.disabled=!1,t.estateName=t.users[0].estateName,t.initializeBene(t.users[0].estateId))})).catch((function(e){console.log(e)}))},initializeBene:function(e){var t=this;this.axios.post(this.nodeApi+"/getTransactions",{estateId:e}).then((function(e){t.transactions=e.data})).catch((function(e){console.log(e)}))},getPerson:function(e){var t=this;this.axios.post(this.nodeApi+"/getPerson",{personId:e}).then((function(e){t.person=e.data,t.person.length>0&&(t.firstName=t.person[0].firstName,t.lastName=t.person[0].lastName)})).catch((function(e){console.log(e)}))},estateStatus:function(e){return 0==e?"Pending ED 15":1==e?"Pending ED 16":void 0},editItem:function(e){this.editedIndex=this.transactions.indexOf(e),this.editedUser=Object.assign({},e),this.editedUser.debitamount>0?this.amount=this.editedUser.debitamount:this.amount=this.editedUser.creditamount,this.dialog=!0},editEstate:function(e){this.estateIndex=this.users.indexOf(e),this.estate=Object.assign({},e),this.dialogEstate=!0},deleteItem:function(e){var t=this.transactions.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.transactions.splice(t,1)},deleteEstate:function(e){var t=this.transactions.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.transactions.splice(t,1)},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedUser=Object.assign({},e.defaultUser),e.editedIndex=-1}))},closeEstate:function(){var e=this;this.dialogEstate=!1,this.$nextTick((function(){e.estate=Object.assign({},e.defaultEstate),e.estateIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1){1==this.editedUser.type?(this.editedUser.debitamount=parseFloat(this.amount).toFixed(2),this.editedUser.creditamount=0):(this.editedUser.debitamount=0,this.editedUser.creditamount=parseFloat(this.amount).toFixed(2));var t={details:this.editedUser.details,debitamount:this.editedUser.lastName,creditamount:this.editedUser.nationalId,financialId:this.editedUser.financialId};this.axios.post(this.nodeApi+"/updateTransaction",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Transaction Updated",text:"Your transaction was successfully updated."}),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Updating Transaction Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating Transaction Failed",text:t})})),this.close()}else this.editedUser.details?this.amount?Number(this.amount)<1?this.$swal.fire({type:"error",title:"Adding Transaction Failed",text:"Please enter a valid transaction amount greater than 0."}):this.editedUser.type?(1==this.editedUser.type?(this.editedUser.debitamount=parseFloat(this.amount).toFixed(2),this.editedUser.creditamount=0):(this.editedUser.debitamount=0,this.editedUser.creditamount=parseFloat(this.amount).toFixed(2)),this.editedUser.estateId=this.users[0].estateId,this.editedUser.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addTransaction",this.editedUser).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Transaction Added",text:"Your new transaction was successfully added."}),e.initialize(e.personId),e.amount=""):e.$swal.fire({type:"error",title:"Adding Transaction Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding Transaction Failed",text:t})})),this.close()):this.$swal.fire({type:"error",title:"Adding Transaction Failed",text:"Please select a valid transaction type"}):this.$swal.fire({type:"error",title:"Adding Transaction Failed",text:"Please enter a valid transaction amount"}):this.$swal.fire({type:"error",title:"Adding Transaction Failed",text:"Please enter valid transaction details"})},saveEstate:function(){var e=this;if(this.estateIndex>-1){var t={estateName:this.estate.estateName,estateValue:this.estate.estateValue,estateId:this.estate.estateId};this.axios.post(this.nodeApi+"/updateEstate",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Estate Updated",text:"Your estate was successfully updated."}),e.getPerson(e.personId),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Updating Estate Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating Estate Failed",text:t})})),this.closeEstate()}else this.estate.estateName?this.estate.estateValue?(this.estate.deathRecordId=this.personId,this.estate.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addEstate",this.estate).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Estate Added",text:"Your new estate was successfully added."}),e.getPerson(e.personId),e.initialize(e.personId)):e.$swal.fire({type:"error",title:"Adding estate Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding estate Failed",text:t})})),this.closeEstate()):this.$swal.fire({type:"error",title:"Adding Estate Failed",text:"Please enter a valid Estate Value"}):this.$swal.fire({type:"error",title:"Adding Estate Failed",text:"Please enter a valid Estate Name"})}}}),Ue=we,_e=Object(o["a"])(Ue,ye,be,!1,null,"16aa3751",null),ke=_e.exports;d()(_e,{VBtn:W["a"],VCard:L["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:K["a"],VContainer:Q["a"],VDataTable:X["a"],VDialog:ee["a"],VIcon:te["a"],VRow:ae["a"],VSelect:se["a"],VSpacer:ie["a"],VTextField:re["a"],VToolbar:oe["a"]});var Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-text-field",{staticClass:"mt-5 mr-5",attrs:{dense:"","append-icon":"search",label:"Search",solo:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),s),[e._v("New Beneficiary")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.editedUser.firstName,callback:function(t){e.$set(e.editedUser,"firstName",t)},expression:"editedUser.firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.editedUser.lastName,callback:function(t){e.$set(e.editedUser,"lastName",t)},expression:"editedUser.lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Email Address"},model:{value:e.editedUser.emailAddress,callback:function(t){e.$set(e.editedUser,"emailAddress",t)},expression:"editedUser.emailAddress"}})],1),"New User"==e.formTitle?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.editedUser.userPassword,callback:function(t){e.$set(e.editedUser,"userPassword",t)},expression:"editedUser.userPassword"}})],1):e._e(),"New User"==e.formTitle?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Confirm Password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v(" mdi-pencil ")]),a("v-icon",{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1)},Ne=[],Ae={props:{personId:Number},data:function(){return{nodeApi:"",page:"Main Page",dialog:!1,search:"",confirm_password:"",userTypeData:[{id:1,name:"Registrar"},{id:2,name:"Court Officer"},{id:3,name:"Judge"},{id:4,name:"Lawyer"},{id:5,name:"Prisons Officer"}],userStatusData:[{id:1,name:"Active"},{id:2,name:"Inactive"}],headers:[{text:"User ID",value:"userId"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Email Address",value:"emailAddress"},{text:"User Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedUser:{userName:"",firstName:"",lastName:"",email:""},defaultUser:{userName:"",firstName:"",lastName:"",email:"",userPassword:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Beneficiary":"Edit Beneficiary"}},watch:{dialog:function(e){e||this.close()}},mounted:function(){console.log(this.personId)},created:function(){this.initialize()},methods:{initialize:function(){var e=this;this.axios.get(this.nodeApi+"/getAllUsers").then((function(t){e.users=t.data})).catch((function(e){console.log(e)}))},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedUser=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this.users.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.users.splice(t,1)},close:function(){var e=this;this.dialog=!1,this.confirm_password="",this.$nextTick((function(){e.editedUser=Object.assign({},e.defaultUser),e.editedIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1){this.editedUser.userType=this.editedUser.userType.id,this.editedUser.status=this.editedUser.status.id;var t={userName:this.editedUser.userName,firstName:this.editedUser.firstName,lastName:this.editedUser.lastName,email:this.editedUser.email,cell:this.editedUser.cell,userType:this.editedUser.userType,status:this.editedUser.status,password:this.editedUser.password},a=this.editedUser.id;this.axios.post(this.nodeApi+"/updateUser",{data:t,id:a}).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Updated",text:"Your user was successfully updated."}),e.initialize()):e.$swal.fire({type:"error",title:"Updating User Failed",text:t.data.sqlMessage})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating User Failed",text:t})})),this.close()}else this.editedUser.firstName?this.editedUser.lastName?this.editedUser.email?this.editedUser.cell?this.editedUser.userName?this.editedUser.password?this.editedUser.password!=this.confirm_password?this.$swal.fire({type:"error",title:"Adding User Failed",text:"Passwords do not match"}):this.editedUser.userType?this.editedUser.status?(this.editedUser.userType=this.editedUser.userType.id,this.editedUser.status=this.editedUser.status.id,this.editedUser.createdBy=this.$session.get("user").id,this.axios.post(this.nodeApi+"/addUser",this.editedUser).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Added",text:"Your new user was successfully added."}),e.initialize()):e.$swal.fire({type:"error",title:"Adding User Failed",text:t.data.sqlMessage})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding User Failed",text:t})})),this.close()):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid User Status"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid User Type"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Password"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid User Name"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Cell Number"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Email Address"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Last Name"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid First Name"})}}},Ie=Ae,Ce=Object(o["a"])(Ie,Te,Ne,!1,null,"c01b6fc8",null),Pe=Ce.exports;d()(Ce,{VBtn:W["a"],VCard:L["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:K["a"],VContainer:Q["a"],VDataTable:X["a"],VDialog:ee["a"],VIcon:te["a"],VRow:ae["a"],VSpacer:ie["a"],VTextField:re["a"],VToolbar:oe["a"]});var Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"userId"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-text-field",{staticClass:"mt-5 mr-5",attrs:{dense:"","append-icon":"search",label:"Search",solo:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),s),[e._v("New Person")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.editedUser.firstName,callback:function(t){e.$set(e.editedUser,"firstName",t)},expression:"editedUser.firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.editedUser.lastName,callback:function(t){e.$set(e.editedUser,"lastName",t)},expression:"editedUser.lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Death Record Number"},model:{value:e.editedUser.deathRecordId,callback:function(t){e.$set(e.editedUser,"deathRecordId",t)},expression:"editedUser.deathRecordId"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.createdAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.updatedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.updatedAt).toLocaleString("en-GB",{timeZone:"UTC"}))+" ")]}},{key:"item.estateStatus",fn:function(t){var s=t.item;return[5==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e(),6==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"cyan",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e(),7==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"blue",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e(),8==s.estateStatus?a("v-chip",{staticClass:"ma-2",attrs:{color:"green",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v(" label ")]),e._v(" "+e._s(e.estateStatus(s.estateStatus))+" ")],1):e._e()]}},{key:"item.actions",fn:function(t){var s=t.item;return[e.userType<=2?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editItem(s)}}},"v-icon",r,!1),i),[e._v(" edit ")])]}}],null,!0)},[a("span",[e._v("Edit Person")])]):e._e(),4==e.userType||e.userType<=2?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.openSub(s.personId,"View Estates Page","estates")}}},"v-icon",r,!1),i),[e._v(" business ")])]}}],null,!0)},[a("span",[e._v("View Estates")])]):e._e(),3==e.userType||e.userType<=2?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"green"},on:{click:function(t){return e.openSub(s.personId,"View Financials Page","financials")}}},"v-icon",r,!1),i),[e._v(" attach_money ")])]}}],null,!0)},[a("span",[e._v("View Financials")])]):e._e()]}},{key:"no-data",fn:function(){return[a("h2",[e._v("No Records Found")])]},proxy:!0}])}),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialogFull,callback:function(t){e.dialogFull=t},expression:"dialogFull"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v(e._s(e.subMenu))]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.dialogFull=!1}}},[e._v("Close")])],1)],1),a("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[a(e.subPage,{tag:"component",attrs:{personId:e.selectedPersonId}})],1)],1)],1)],1)},$e=[],Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"userId"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-text-field",{staticClass:"mt-5 mr-5",attrs:{dense:"","append-icon":"search",label:"Search",solo:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),s),[e._v("New Document")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.editedUser.firstName,callback:function(t){e.$set(e.editedUser,"firstName",t)},expression:"editedUser.firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.editedUser.lastName,callback:function(t){e.$set(e.editedUser,"lastName",t)},expression:"editedUser.lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Email Address"},model:{value:e.editedUser.emailAddress,callback:function(t){e.$set(e.editedUser,"emailAddress",t)},expression:"editedUser.emailAddress"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-select",{staticClass:"text-left",attrs:{"item-text":"name","item-value":"id",items:e.userTypeData,label:"Select UserType"},model:{value:e.editedUser.usertype,callback:function(t){e.$set(e.editedUser,"usertype",t)},expression:"editedUser.usertype"}})],1),"New User"==e.formTitle?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.editedUser.userPassword,callback:function(t){e.$set(e.editedUser,"userPassword",t)},expression:"editedUser.userPassword"}})],1):e._e(),"New User"==e.formTitle?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Confirm Password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(t){return e.editItem(s)}}},"v-icon",r,!1),i),[e._v(" mdi-pencil ")])]}}],null,!0)},[a("span",[e._v("Edit User")])]),1!=s.status?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"red"},on:{click:function(t){return e.changeStatus(s,1)}}},"v-icon",r,!1),i),[e._v(" face ")])]}}],null,!0)},[a("span",[e._v("Activate User")])]):e._e(),0!=s.status?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"green"},on:{click:function(t){return e.changeStatus(s,0)}}},"v-icon",r,!1),i),[e._v(" face ")])]}}],null,!0)},[a("span",[e._v("De-Activate User")])]):e._e(),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{color:"gray"},on:{click:function(t){return e.openRestPassword(s)}}},"v-icon",r,!1),i),[e._v(" vpn_key ")])]}}],null,!0)},[a("span",[e._v("Reset Password")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0},{key:"item.status",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.userStatus(a))+" ")]}}])}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogRestPassword,callback:function(t){e.dialogRestPassword=t},expression:"dialogRestPassword"}},[a("v-card",[a("v-card-title",{staticClass:"headline red lighten-2 white--text",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[e._v("Reset Password")])]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.editedUser.userPassword,callback:function(t){e.$set(e.editedUser,"userPassword",t)},expression:"editedUser.userPassword"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{type:"password",label:"Confirm Password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogRestPassword=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.restPassword}},[e._v("Save")])],1)],1)],1)],1)},Se=[],Ve={props:{personId:Number},data:function(){return{nodeApi:"",page:"Main Page",dialog:!1,dialogRestPassword:!1,search:"",confirm_password:"",userTypeData:[{id:1,name:"Super Admin"},{id:2,name:"Admin"},{id:3,name:"Accountant"},{id:4,name:"Data Capturer"}],userStatusData:[{id:1,name:"Active"},{id:2,name:"Inactive"}],headers:[{text:"User ID",value:"userId"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Email Address",value:"emailAddress"},{text:"User Status",value:"status"},{text:"User Type",value:"usertype"},{text:"Actions",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedUser:{firstName:"",lastName:"",emailAddress:"",userPassword:"",usertype:""},defaultUser:{firstName:"",lastName:"",emailAddress:"",userPassword:"",usertype:""},passwordObj:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Document":"Edit Document"}},watch:{dialog:function(e){e||this.close()}},mounted:function(){console.log(this.personId)},created:function(){this.initialize()},methods:{initialize:function(){var e=this;this.axios.get(this.nodeApi+"/getAllUsers").then((function(t){e.users=t.data})).catch((function(e){console.log(e)}))},userStatus:function(e){return 0==e.status?"Inactive":"Active"},openRestPassword:function(e){this.dialogRestPassword=!0,this.passwordObj={userId:e.userId,userPassword:""}},restPassword:function(){var e=this;this.passwordObj.userPassword=this.confirm_password,this.editedUser.userPassword?this.editedUser.userPassword!=this.confirm_password?this.$swal.fire({type:"error",title:"Update User Failed",text:"Passwords do not match"}):this.axios.post(this.nodeApi+"/updatePassword",this.passwordObj).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Updated",text:"Your user password was updated successfully."}),e.initialize(),e.dialogRestPassword=!1,e.confirm_password="",e.editedUser.userPassword=""):e.$swal.fire({type:"error",title:"Updating User Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating User Failed",text:t})})):this.$swal.fire({type:"error",title:"Update User Failed",text:"Please enter a valid Password"})},changeStatus:function(e,t){var a=this,s={userId:e.userId,status:t},i="";i=1==t?"Activated":"De-Activated",this.axios.post(this.nodeApi+"/updateStatus",s).then((function(e){e.data.affectedRows>0?(a.$swal.fire({type:"success",title:"User Updated",text:"Your user was successfully "+i+"."}),a.initialize()):a.$swal.fire({type:"error",title:"Updating User Failed",text:e.data.originalError.info.message})})).catch((function(e){a.$swal.fire({type:"error",title:"Updating User Failed",text:e})}))},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedUser=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this.users.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.users.splice(t,1)},close:function(){var e=this;this.dialog=!1,this.confirm_password="",this.$nextTick((function(){e.editedUser=Object.assign({},e.defaultUser),e.editedIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1){var t={firstName:this.editedUser.firstName,lastName:this.editedUser.lastName,emailAddress:this.editedUser.emailAddress,userId:this.editedUser.userId,usertype:this.editedUser.usertype};this.axios.post(this.nodeApi+"/updateUser",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Updated",text:"Your user was successfully updated."}),e.initialize()):e.$swal.fire({type:"error",title:"Updating User Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating User Failed",text:t})})),this.close()}else this.editedUser.firstName?this.editedUser.lastName?this.editedUser.emailAddress?this.editedUser.userPassword?this.editedUser.userPassword!=this.confirm_password?this.$swal.fire({type:"error",title:"Adding User Failed",text:"Passwords do not match"}):(this.editedUser.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addUser",this.editedUser).then((function(t){console.log(t.data),t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"User Added",text:"Your new user was successfully added."}),e.initialize()):e.$swal.fire({type:"error",title:"Adding User Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding User Failed",text:t})})),this.close()):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Password"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Email Address"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid Last Name"}):this.$swal.fire({type:"error",title:"Adding User Failed",text:"Please enter a valid First Name"})}}},De=Ve,Re=Object(o["a"])(De,Fe,Se,!1,null,"b5e60fc8",null),Be=Re.exports;d()(Re,{VBtn:W["a"],VCard:L["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:K["a"],VContainer:Q["a"],VDataTable:X["a"],VDialog:ee["a"],VIcon:te["a"],VRow:ae["a"],VSelect:se["a"],VSpacer:ie["a"],VTextField:re["a"],VToolbar:oe["a"],VTooltip:ne["a"]});var Oe={components:{estates:xe,financials:ke,beneficiaries:Pe,documents:Be},data:function(){return{nodeApi:"",page:"Main Page",dialog:!1,subMenu:"",subPage:"",dialogRestPassword:!1,dialogFull:!1,search:"",confirm_password:"",userTypeData:[{id:1,name:"Registrar"},{id:2,name:"Court Officer"},{id:3,name:"Judge"},{id:4,name:"Lawyer"},{id:5,name:"Prisons Officer"}],userStatusData:[{id:1,name:"Active"},{id:2,name:"Inactive"}],headers:[{text:"Person ID",value:"personId"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Death Record",value:"deathRecordId"},{text:"Date Registered",value:"createdAt"},{text:"Date Modified",value:"updatedAt"},{text:"Estate Status",value:"estateStatus"},{text:"Actions",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedUser:{firstName:"",lastName:"",deathRecordId:"",createdBy:""},defaultUser:{firstName:"",lastName:"",createdBy:"",deathRecordId:""},selectedPersonId:null,userType:null}},computed:{formTitle:function(){return-1===this.editedIndex?"New Person":"Edit Person"}},watch:{dialog:function(e){e||this.close()},dialogFull:function(e){e||(this.selectedPersonId=null,this.subPage="")}},mounted:function(){this.userType=this.$session.get("user").usertype},created:function(){this.initialize()},methods:{initialize:function(){var e=this;this.axios.get(this.nodeApi+"/getAllPersons").then((function(t){e.users=t.data})).catch((function(e){console.log(e)}))},estateStatus:function(e){return 5==e?"New Estate Pending Upload":6==e?"Estate @ 33%":7==e?"Estate @ 66%":8==e?"Estate completed @ 100%":void 0},openSub:function(e,t,a){this.subPage="",this.subMenu=t,this.selectedPersonId=e,this.subPage=a,this.dialogFull=!0},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedUser=Object.assign({},e),this.dialog=!0},close:function(){var e=this;this.dialog=!1,this.confirm_password="",this.$nextTick((function(){e.editedUser=Object.assign({},e.defaultUser),e.editedIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1){var t={firstName:this.editedUser.firstName,lastName:this.editedUser.lastName,deathRecordId:this.editedUser.deathRecordId,personId:this.editedUser.personId};this.axios.post(this.nodeApi+"/updatePerson",t).then((function(t){t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Person Updated",text:"Your Person was successfully updated."}),e.initialize()):e.$swal.fire({type:"error",title:"Updating Person Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Updating Person Failed",text:t})})),this.close()}else this.editedUser.firstName?this.editedUser.lastName?this.editedUser.deathRecordId?(this.editedUser.createdBy=this.$session.get("user").userId,this.axios.post(this.nodeApi+"/addPerson",this.editedUser).then((function(t){console.log(t.data),t.data.affectedRows>0?(e.$swal.fire({type:"success",title:"Person Added",text:"Your new Person was successfully added."}),e.initialize()):e.$swal.fire({type:"error",title:"Adding Person Failed",text:t.data.originalError.info.message})})).catch((function(t){e.$swal.fire({type:"error",title:"Adding Person Failed",text:t})})),this.close()):this.$swal.fire({type:"error",title:"Adding Person Failed",text:"Please enter a valid Death Record Number"}):this.$swal.fire({type:"error",title:"Adding Person Failed",text:"Please enter a valid Last Name"}):this.$swal.fire({type:"error",title:"Adding Person Failed",text:"Please enter a valid First Name"})}}},je=Oe,Le=a("2a7f"),ze=Object(o["a"])(je,Ee,$e,!1,null,"f4b6146e",null),Me=ze.exports;d()(ze,{VBtn:W["a"],VCard:L["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VChip:he["a"],VCol:K["a"],VContainer:Q["a"],VDataTable:X["a"],VDialog:ee["a"],VIcon:te["a"],VRow:ae["a"],VSpacer:ie["a"],VTextField:re["a"],VToolbar:oe["a"],VToolbarItems:Le["a"],VToolbarTitle:Le["b"],VTooltip:ne["a"]});var Ye={components:{dashboard:G,useradmin:le,estates:xe,financials:ke,beneficiaries:Pe,persons:Me},data:function(){return{nodeApi:"",userName:"",userType:null,page:"",drawer:!1,dialogloader:!1}},mounted:function(){if(this.$session.exists()){this.userName=this.$session.get("user").emailAddress,this.userType=this.$session.get("user").usertype;var e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});e.fire({type:"success",title:"Signed in successfully"})}else this.$router.push({name:"Login"}).catch((function(){}));this.userType,this.page="persons"},methods:{Headering:function(e){return"useradmin"==e?"User Admin Page":"estates"==e?"Estates Page":"beneficiaries"==e?"Beneficiaries Page":"financials"==e?"Financials Page":"persons"==e?"Persons Page":"dashboard"==e?"Dashboard Page":void 0},logout:function(){this.$session.destroy(),this.$router.push({name:"Login"}).catch((function(){}))},selectMenu:function(e){this.page="",this.page=e,this.drawer=!1}}},Ge=Ye,Ze=a("40dc"),qe=a("5bc1"),Je=a("8860"),He=a("da13"),We=a("1baa"),Ke=a("34c3"),Qe=a("5d23"),Xe=a("f774"),et=a("8e36"),tt=a("8dd9"),at=Object(o["a"])(Ge,v,g,!1,null,null,null),st=at.exports;d()(at,{VAppBar:Ze["a"],VAppBarNavIcon:qe["a"],VCard:L["a"],VCardText:z["b"],VDialog:ee["a"],VIcon:te["a"],VImg:M["a"],VList:Je["a"],VListItem:He["a"],VListItemGroup:We["a"],VListItemIcon:Ke["a"],VListItemTitle:Qe["b"],VNavigationDrawer:Xe["a"],VProgressLinear:et["a"],VSheet:tt["a"],VSpacer:ie["a"],VToolbarTitle:Le["b"]});var it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("div",{style:e.logoStyle},[s("div",{style:e.loginPage},[s("img",{staticClass:"bounceIn",staticStyle:{"margin-bottom":"25px"},attrs:{src:a("9b19"),width:"100"}})]),s("div",{style:e.form},[s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],style:e.formInput,attrs:{type:"text",placeholder:"User Name"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],style:e.formInput,attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("button",{style:e.loginButton,on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("login")])])])]),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1)],1)},rt=[],ot={data:function(){return{nodeApi:"",userName:"",password:"",dialogloader:!1,imageLogo:"../assets/logo.png",logoStyle:{"text-align":"center"},loginPage:{width:"360px",padding:"10% 0 0",margin:"auto"},form:{position:"relative","z-index":1,background:"#FFFFFF","max-width":"360px",margin:"0 auto 100px",padding:"45px","text-align":"center","box-shadow":"0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24)"},formInput:{"font-family":'"Roboto", sans-serif',outline:0,background:"#f2f2f2",width:"100%",border:0,margin:"0 0 15px",padding:"15px","box-sizing":"border-box","font-size":"14px"},loginButton:{"font-family":'"Roboto", sans-serif',"text-transform":"uppercase",outline:0,background:"#228cdb",width:"100%",border:0,padding:"15px",color:"#FFFFFF","font-size":"14px","-webkit-transition":"all 0.3 ease",transition:"all 0.3 ease",cursor:"pointer"}}},methods:{login:function(){var e=this;this.dialogloader=!0,this.userName&&this.password?this.axios.post(this.nodeApi+"/getUser",{emailAddress:this.userName,userPassword:this.password}).then((function(t){1==t.data.length?(e.dialogloader=!1,e.$session.start(),e.$session.set("user",t.data[0]),e.$router.push({name:"Home"}).catch((function(){}))):(e.dialogloader=!1,e.$swal.fire({type:"error",title:"Login Failure",text:"Invalid username and password."}))})).catch((function(t){e.dialogloader=!1,e.$swal.fire({type:"error",title:"Logout Failed",text:t})})):(this.dialogloader=!1,this.$swal.fire({type:"error",title:"Login Failure",text:"Please enter a valid username and password."}))}}},nt=ot,dt=(a("0d88"),Object(o["a"])(nt,it,rt,!1,null,"5bc37e91",null)),lt=dt.exports;d()(dt,{VCard:L["a"],VCardText:z["b"],VDialog:ee["a"],VProgressLinear:et["a"]}),s["a"].use(h["a"]);var ct=[{path:"/",name:"Login",component:lt},{path:"/home",name:"Home",component:st},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],ut=new h["a"]({routes:ct}),ft=ut,pt=a("6293"),mt=a.n(pt),ht=a("0628"),vt=a.n(ht),gt=(a("bf68"),a("fb67")),xt=a.n(gt),yt=a("5886"),bt=(a("4413"),a("bc3a")),wt=a.n(bt),Ut=a("a7fe"),_t=a.n(Ut);s["a"].use(_t.a,wt.a),s["a"].use(mt.a),s["a"].use(yt["a"]),s["a"].component("vue-tel-input",xt.a),s["a"].use(vt.a),s["a"].config.productionTip=!1,new s["a"]({vuetify:m,router:ft,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},6589:function(e,t,a){},"6aee":function(e,t,a){"use strict";var s=a("6589"),i=a.n(s);i.a},"6c0e":function(e,t,a){},"9b19":function(e,t,a){e.exports=a.p+"img/logo.63a7d78d.svg"},"9c0c":function(e,t,a){},d1d4:function(e,t,a){"use strict";var s=a("6c0e"),i=a.n(s);i.a},d7c3:function(e,t,a){e.exports=a.p+"img/vbanner5.a2726d8c.jpg"}});
//# sourceMappingURL=app.4bae1b78.js.map